#!/bin/sh

# remove cached packages
printf "Remove cached packages? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    sudo pacman -Scc --noconfirm
    paru -Scc --noconfirm
fi

# remove orphaned packages
printf "Remove orphaned packages? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    sudo pacman -Rns $(pacman -Qtdq) --noconfirm
    paru -Rns $(paru -Qtdq) --noconfirm
fi

# remove unneeded packages
printf "Remove unneeded packages? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    pacman -Qdttq | sudo pacman -Rns -
    paru -Qdttq | paru -Rns -
fi

# clean up the cache directory
printf "Clean up ~/.cache directory? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    rm -rf ~/.cache/*
fi

# delete old journals
printf "Delete old journals? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    sudo journalctl --vacuum-time=2weeks
fi

# refresh pacman mirrorlist
printf "Refresh packman mirrorlist? (yes/no) "
read CHOICE
if [ "$CHOICE" = yes ]; then
    sudo reflector --verbose --latest 5 --sort rate --save /etc/pacman.d/mirrorlist
fi
