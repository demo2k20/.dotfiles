#!/bin/sh

case $BLOCK_BUTTON in
	1) networkmanager_dmenu ;;
esac

# dependency: nmcli

# check to see if there is a wired connection
CONNTYPE=$(nmcli -a | grep 'Wired connection' | sed 's/.*//')

# if there is a wired connection, print it
if [ "$CONNTYPE" = "" ]; then
	PRIVATE=$(nmcli -a | grep 'inet4 192' | awk '{print $2}' | cut -d '/' -f 1) # Local ip
	printf "$CONNTYPE $PRIVATE\n"
fi

# if there is not, check for wifi connection and print it
if [ "$CONNTYPE" = "" ]; then
	CONNTYPE=$(nmcli -t -f active,ssid dev wifi | grep '^yes' | sed 's/.*//')
	WIFISTRENGTH=$(nmcli dev wifi | sed -n '2p' | awk '{print $8}')
	printf "$CONNTYPE $WIFISTRENGTH%%\n"
fi

# if there's no internet connection, print exclamation marks
if [ "$CONNTYPE" = "" ]; then
	CONNTYPE="  /  "
	printf "$CONNTYPE\n"
fi
