#!/bin/sh

if [ "$1" = "-dmenu" ]; then
    CHOICE=$(printf "on\noff\nextreme" | dmenu -p "Nightlight")
    case $CHOICE in
        on)
            redshift -PO 3200 && touch /tmp/nightlight && pkill -SIGRTMIN+10 dwmblocks || pkill -SIGRTMIN+10 i3blocks ;;
        off)
            redshift -PO 6500 && rm /tmp/nightlight && pkill -SIGRTMIN+10 dwmblocks || pkill -SIGRTMIN+10 i3blocks ;;
        extreme)
            redshift -PO 1300 && touch /tmp/nightlight && pkill -SIGRTMIN+10 dwmblocks || pkill -SIGRTMIN+10 i3blocks ;;
        *)
            exit ;;
    esac
fi

if [ -f /tmp/nightlight ]; then
    printf "ï†… Nightlight\n"
else
    exit
fi
